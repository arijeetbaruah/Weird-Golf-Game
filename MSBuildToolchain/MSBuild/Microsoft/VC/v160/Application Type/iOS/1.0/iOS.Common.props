<!--
***********************************************************************************************
iOS.Common.props

WARNING:  DO NOT MODIFY this file unless you are knowledgeable about MSBuild and have
          created a backup copy.  Incorrect changes to this file will make it
          impossible to load or build your projects from the command-line or the IDE.

Copyright (C) Microsoft Corporation. All rights reserved.
***********************************************************************************************
-->

<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <Import Project="$(MSBuildThisFileDirectory)ImportBefore\*.props" Condition="Exists('$(MSBuildThisFileDirectory)ImportBefore')" />

   <PropertyGroup>
    <!-- By default we use the same bitness as the hosting platform -->
    <PreferredToolArchitecture Condition="'$(PreferredToolArchitecture)' == ''">x64</PreferredToolArchitecture>

    <!-- If OS is not x64, we cannot use x64 tools even if preferred -->
    <PreferredToolArchitecture Condition="'$(PreferredToolArchitecture)' == 'x64' and '$(PROCESSOR_ARCHITECTURE)' != 'AMD64' and '$(PROCESSOR_ARCHITEW6432)' != 'AMD64'">x86</PreferredToolArchitecture>
  </PropertyGroup>

  <PropertyGroup>
    <!--<BuildIntermediateRoot Condition="'$(BuildIntermediateRoot)' == ''">$(ProjectDir)Intermediate\</BuildIntermediateRoot>-->

    <!-- Required for enabling Team Build projects -->
    <OutDirWasSpecified Condition=" '$(OutDir)'!='' AND '$(OutDirWasSpecified)'=='' ">true</OutDirWasSpecified>
    <OutDirWasSpecified Condition=" '$(OutDir)'=='' AND '$(OutDirWasSpecified)'=='' ">false</OutDirWasSpecified>

    <IntDir Condition="'$(IntDir)'=='' AND '$(IntermediateOutputPath)'!=''">$(IntermediateOutputPath)</IntDir>
    <IntDir Condition="'$(IntDir)'=='' AND '$(IntermediateOutputPath)'==''">$(Platform)\$(Configuration)\</IntDir>
    <OutDir Condition="'$(OutDir)'=='' AND '$(SolutionDir)' == ''">$(IntDir)</OutDir>
    <OutDir Condition="'$(OutDir)'=='' AND '$(SolutionDir)' != ''">$(SolutionDir)$(Platform)\$(Configuration)\</OutDir>
    <!-- Disable features not supported for iOS projects -->
    <UseOfMFC>false</UseOfMFC>
    <UseOfATL>false</UseOfATL>
    <CharacterSet>Unicode</CharacterSet>
  </PropertyGroup>

  <!-- Default values -->
  <PropertyGroup>
    <TargetRuntime>Native</TargetRuntime>
    <TargetExt />
    <ProjectName Condition="'$(ProjectName)' == ''">$(MSBuildProjectName)</ProjectName>

    <ExtensionsToDeleteOnClean Condition="'$(ExtensionsToDeleteOnClean)' == ''">*.d;*.tlog;$(ExtensionsToDeleteOnClean)</ExtensionsToDeleteOnClean>
    <PreBuildEventUseInBuild Condition="'$(PreBuildEventUseInBuild)' == ''">true</PreBuildEventUseInBuild>
    <PreLinkEventUseInBuild Condition="'$(PreLinkEventUseInBuild)' == ''">true</PreLinkEventUseInBuild>
    <PostBuildEventUseInBuild Condition="'$(PostBuildEventUseInBuild)' == ''">true</PostBuildEventUseInBuild>
    <iOSConfigurationType Condition="'$(iOSConfigurationType)' == ''">StaticLibrary</iOSConfigurationType>
  </PropertyGroup>

  <!-- ConfigurationType Specific values -->
  <PropertyGroup Condition="'$(iOSConfigurationType)' == 'Application'">
    <TargetExt>.app</TargetExt>
    <TargetName Condition="'$(TargetName)' == ''">$(ProjectName)</TargetName>
    <OutputType>exe</OutputType>
    <ConfigurationType>Application</ConfigurationType>
  </PropertyGroup>
  
  <PropertyGroup Condition="'$(iOSConfigurationType)' == 'DynamicLibrary'">
    <TargetExt>.dylib</TargetExt>
    <TargetName Condition="'$(TargetName)' == ''">$(ProjectName)</TargetName>
    <OutputType>library</OutputType>
    <ConfigurationType>DynamicLibrary</ConfigurationType>
  </PropertyGroup>

   <PropertyGroup Condition="'$(iOSConfigurationType)' == 'StaticLibrary'">
    <TargetExt>.a</TargetExt>
    <OutputType>staticlibrary</OutputType>
    <TargetName Condition="'$(TargetName)' == ''">lib$(ProjectName)</TargetName>
    <ConfigurationType>StaticLibrary</ConfigurationType>
  </PropertyGroup>

  <PropertyGroup Condition="'$(iOSConfigurationType)' == 'Framework'">
    <TargetExt>.framework</TargetExt>
    <OutputType>library</OutputType>
    <TargetName Condition="'$(TargetName)' == ''">$(ProjectName)</TargetName>
    <ConfigurationType>DynamicLibrary</ConfigurationType>
  </PropertyGroup>

  <PropertyGroup>
    <ConfigurationType Condition="'$(ConfigurationType)' == ''">StaticLibrary</ConfigurationType>
  </PropertyGroup>

  <!-- VsInstallRoot should be defined by msbuild -->
  <PropertyGroup>
    <VSInstallDir>$(VsInstallRoot)\</VSInstallDir>
    <VCIDEInstallDir>$(VSInstallDir)Common7\IDE\VC\</VCIDEInstallDir>
  </PropertyGroup>
 

  <PropertyGroup>
    <!-- VCToolsInstallDir and WindowsSdkDir are required to statisfy the missing directory detection. -->
    <VCInstallDir Condition="'$(VCInstallDir)' == ''">VCInstallDir_is_not_defined</VCInstallDir>
    <VCToolsInstallDir Condition="'$(VCToolsInstallDir)' == ''">VCToolsInstallDir_is_not_defined</VCToolsInstallDir>
    <WindowsSdkDir Condition="'$(WindowsSdkDir)' == ''">WindowsSdkDir_is_not_defined</WindowsSdkDir>
    <_CheckDev11ToolsInstalled>false</_CheckDev11ToolsInstalled>
  </PropertyGroup>

  <PropertyGroup>
    <PbxprojDirectory Condition="'$(PbxprojDirectory)' == ''">$(IntDir)$(ProjectName).xcodeproj</PbxprojDirectory>
    <PayloadDescriptionFilepath Condition="'$(PayloadDescriptionFilepath)' == ''">$(ProjectDir)\.$(ProjectName).payload.desc</PayloadDescriptionFilepath>
    
    <!-- Search paths to copy to the remote machine. 
    $(CopyAdditionalIncludes) = 'false' to disable.
    $(CopyAdditionalIncludesSharedItems) = 'false' to disble looking in shared items
    -->
    <AdditionalIncludeHeaderExtensions>.h;.hh;.hpp;.hxx;$(AdditionalIncludeHeaderExtensions)</AdditionalIncludeHeaderExtensions>
    <AdditionalIncludeSearchPaths>$(IncludeDir);$(ProjectDir);$(AdditionalIncludeSearchPaths)</AdditionalIncludeSearchPaths>
  </PropertyGroup>

  <ItemDefinitionGroup>
    <CustomBuild>
      <Message                     Condition="'%(CustomBuild.Message)'                    == ''">Performing Custom Build Tools</Message>
      <LinkObjects                 Condition="'%(CustomBuild.LinkObjects)'                == ''">true</LinkObjects>
      <TreatOutputAsContent        Condition="'%(CustomBuild.TreatOutputAsContent)'       == ''">false</TreatOutputAsContent>
      <TrackerLogDirectory         Condition="'%(CustomBuild.TrackerLogDirectory)'        == ''">$(TLogLocation)</TrackerLogDirectory>
      <MinimalRebuildFromTracking  Condition="'%(CustomBuild.MinimalRebuildFromTracking)' == ''">true</MinimalRebuildFromTracking>
      <AcceptableNonZeroExitCodes  Condition="'%(CustomBuild.AcceptableNonZeroExitCodes)' == ''">$(AcceptableNonZeroExitCodes)</AcceptableNonZeroExitCodes>
    </CustomBuild>
    <CustomBuildStep>
      <Message                     Condition="'%(CustomBuildStep.Message)'==''" >Performing Custom Build Step</Message>
    </CustomBuildStep>
    <ProjectReference>
      <LinkLibraryDependencies      Condition="'%(ProjectReference.LinkLibraryDependencies)' == '' and '$(ConfigurationType)' == 'StaticLibrary'">false</LinkLibraryDependencies>
      <LinkLibraryDependencies      Condition="'%(ProjectReference.LinkLibraryDependencies)' == ''">true</LinkLibraryDependencies>
      <UseLibraryDependencyInputs   Condition="'%(ProjectReference.UseLibraryDependencyInputs)' == ''">false</UseLibraryDependencyInputs>
      <ReferenceOutputAssembly      Condition="'%(ProjectReference.ReferenceOutputAssembly)' == ''">false</ReferenceOutputAssembly>
      <Private                      Condition="'%(ProjectReference.Private)' == ''">true</Private>
    </ProjectReference>
    <ClCompile>
      <ClangMode>true</ClangMode>
      <WarningLevel>EnableAllWarnings</WarningLevel>
      <DebugInformationFormat>FullDebugWithDsym</DebugInformationFormat>
      <PreprocessorDefinitions Condition="'$(UseDebugLibraries)' != 'true'">NDEBUG;%(PreprocessorDefinitions)</PreprocessorDefinitions>
      <AdditionalWarning>switch;no-deprecated-declarations;empty-body;bool-conversion;constant-conversion;shorten-64-to-32;enum-conversion;int-conversion;return-type;parentheses;no-pointer-sign;no-format;uninitialized;unreachable-code;unused-function;unused-value;unused-variable;%(AdditionalWarning)</AdditionalWarning>
      <Optimization Condition="'$(UseDebugLibraries)' == 'true'">Disabled</Optimization>
      <Optimization Condition="'$(UseDebugLibraries)' != 'true'">Full</Optimization>
      <StrictAliasing>false</StrictAliasing>
      <ProgramDatabaseFileName>$(IntDir)</ProgramDatabaseFileName>
      <UnrollLoops>false</UnrollLoops>
      <LinkTimeOptimization>false</LinkTimeOptimization>
      <NoCommonBlocks>false</NoCommonBlocks>
      <OmitFramePointers Condition="'$(UseDebugLibraries)' == 'true'">false</OmitFramePointers>
      <OmitFramePointers Condition="'$(UseDebugLibraries)' != 'true'">true</OmitFramePointers>
      <ExceptionHandling>Disabled</ExceptionHandling>
      <ObjCExceptionHandling>Disabled</ObjCExceptionHandling>
      <MakeStringsReadOnly>true</MakeStringsReadOnly>
      <ThreadSafeStatics>true</ThreadSafeStatics>
      <RelaxIEEE>false</RelaxIEEE>
      <HideInlineMethods>false</HideInlineMethods>
      <PositionIndependentCode>false</PositionIndependentCode>
      <SymbolsHiddenByDefault>false</SymbolsHiddenByDefault>
      <PrecompiledHeader>NotUsing</PrecompiledHeader>
      <ObjectFileName>$(IntDir)%(filename).o</ObjectFileName>
      <CompileAs>Default</CompileAs>
      <TreatWarningAsError>false</TreatWarningAsError>
      <Verbose>false</Verbose>
      <EnablePREfast Condition="'%(ClCompile.EnablePREfast)' == ''">false</EnablePREfast>
      <OmitFramePointers Condition="'%(ClCompile.OmitFramePointers)' == ''">false</OmitFramePointers>
      <MinimalRebuildFromTracking>true</MinimalRebuildFromTracking>
      <PrecompiledHeaderOutputFileDirectory>$(IntDir)</PrecompiledHeaderOutputFileDirectory>
      <PrecompiledHeaderOutputFile></PrecompiledHeaderOutputFile>
      <PrecompiledHeaderCompileAs>CompileAsCpp</PrecompiledHeaderCompileAs>
      <CLanguageStandard>gnu99</CLanguageStandard>
      <CppLanguageStandard>gnu++11</CppLanguageStandard>
      <ObjCAutomaticRefCounting>true</ObjCAutomaticRefCounting>
    </ClCompile>
    <Link>
      <ShowProgress>false</ShowProgress>
      <Version>false</Version>
      <VerboseOutput>false</VerboseOutput>
      <IncrementalLink>false</IncrementalLink>
      <UnresolvedSymbolReferences>true</UnresolvedSymbolReferences>
      <OptimizeForMemory>false</OptimizeForMemory>
      <OmitAllSymbolInformation Condition="'$(UseDebugLibraries)' == 'true'">false</OmitAllSymbolInformation>
      <OmitAllSymbolInformation Condition="'$(UseDebugLibraries)' != 'true'">true</OmitAllSymbolInformation>
      <OmitDebuggerSymbolInformation Condition="'$(UseDebugLibraries)' == 'true'">false</OmitDebuggerSymbolInformation>
      <OmitDebuggerSymbolInformation Condition="'$(UseDebugLibraries)' != 'true'">true</OmitDebuggerSymbolInformation>
      <OutputFile>$(OutDir)$(TargetName)$(TargetExt)</OutputFile>
      <MinimalRebuildFromTracking>true</MinimalRebuildFromTracking>
      <Relocation>true</Relocation>
      <FunctionBinding>true</FunctionBinding>
      <NoExecStackRequired>true</NoExecStackRequired>
      <LibraryDependencies>log</LibraryDependencies>
      <LinkDLL Condition="'$(ConfigurationType)' == 'DynamicLibrary'">true</LinkDLL>
    </Link>
    <Lib>
      <OutputFile>$(OutDir)$(TargetName)$(TargetExt)</OutputFile>
      <Command>Replacement</Command>
      <CreateIndex>true</CreateIndex>
    </Lib>
  </ItemDefinitionGroup>

  <PropertyGroup>
    <!--  Initial Debugger page and debugger -->
    <DebuggerFlavor></DebuggerFlavor>
    <DebuggerType>NativeOnly</DebuggerType>
    <DefaultDeviceName Condition="'$(Platform)' == 'x86' or '$(Platform)' == 'x64'">iPhone 6</DefaultDeviceName>

    <!-- Disables the default tools as they are not relavent to iOS in the Property Pages -->
    <UseDefaultProjectTools>false</UseDefaultProjectTools>

    <!-- Hide default General Page to show our own -->
    <UseDefaultGeneralPropertyPageSchema>false</UseDefaultGeneralPropertyPageSchema>

    <!-- Guid used to define the group of items to show in the Add Item Dialog. -->
    <AddItemTemplateGuid Condition="'$(AddItemTemplateGuid)' == ''">{99B6267E-EBC4-4AEF-A6C1-9672C8A5BC27}</AddItemTemplateGuid>

    <!-- Additional include paths for iOS IntelliSense if VCIDEInstallDir is
         successfully resolved. They should come after other regular include paths
         to give user include higher priority -->
    <ISenseIncludePath Condition="'$(VCIDEInstallDir)' != ''">$(VCIDEInstallDir)vcpackages\IntelliSense\iOS\OSS\musl-1.1.10\arch\$(ISensePlatform);$(VCIDEInstallDir)vcpackages\IntelliSense\iOS\OSS\musl-1.1.10\include;$(VCIDEInstallDir)vcpackages\IntelliSense\iOS\OSS\libcxx-3.6.2\include;$(VCIDEInstallDir)vcpackages\IntelliSense\iOS\OSS\khronos.opengles;$(VCIDEInstallDir)vcpackages\IntelliSense\iOS\OSS\openal-soft-1.16.0\include;$(VCIDEInstallDir)vcpackages\IntelliSense\iOS\OSS\sqlite-3.7.13;$(VCIDEInstallDir)vcpackages\IntelliSense\iOS\OSS\zlib-1.2.5;</ISenseIncludePath>

    <iOSIncludePath>$(ISenseIncludePath);$(iOSIncludePath)</iOSIncludePath>
  </PropertyGroup>

  <!--<ImportGroup Label="PropertySheets">
    <Import Condition="'$(UseOfSTL)' != ''" Project="$(MSBuildThisFileDirectory)iOS.STL.props" />
  </ImportGroup>-->

  <Import Project="$(UserRootDir)\Microsoft.Cpp.iOS.user.props" Condition="exists('$(UserRootDir)\Microsoft.Cpp.iOS.user.props')"/>

  <!-- commonly user xcode macros -->
  <PropertyGroup>
    <SOURCE_ROOT>$(ProjectDir)</SOURCE_ROOT>
    <SRCROOT>$(ProjectDir)</SRCROOT>
    <DEVELOPER_DIR>\Applications\Xcode.app\Contents\Developer</DEVELOPER_DIR>
    <SDKROOT>\MacSdkRoot</SDKROOT>
    <SDK_ROOT>\MacSdk_Root</SDK_ROOT>
  </PropertyGroup>

    <!-- remote machine related properties (saved during Paring in Tools - Options page)-->
    <PropertyGroup>
      <!-- default to invalid IP -->
      <MacName Condition="'$(MacName)' == ''">0.0.0.0</MacName>
      <MacUserDir Condition="'$(MacUserDir)' == ''">\MacUserDir</MacUserDir>
      <MacBuildRoot Condition="'$(MacBuildRoot)' == ''">$(MacUserDir)\vcremote</MacBuildRoot>
      <MacRootDir>\\$(MacName)\Macintosh HD</MacRootDir>

      <LocalRemoteDirectoriesMap>$(MacRootDir)=/;$(LocalRemoteDirectoriesMap)</LocalRemoteDirectoriesMap>
      <LocalRemoteDirectoriesMap>$(MacRootDir)$(MacUserDir)=~;$(LocalRemoteDirectoriesMap)</LocalRemoteDirectoriesMap>
      <LocalRemoteDirectoriesMap>$(MacRootDir)$(DEVELOPER_DIR)=%24(DEVELOPER_DIR);$(LocalRemoteDirectoriesMap)</LocalRemoteDirectoriesMap>
      <LocalRemoteDirectoriesMap>$(MacRootDir)$(SDKROOT)=%24(SDKROOT);$(LocalRemoteDirectoriesMap)</LocalRemoteDirectoriesMap>
      <LocalRemoteDirectoriesMap>$(MacRootDir)$(SDK_ROOT)=%24(SDK_ROOT);$(LocalRemoteDirectoriesMap)</LocalRemoteDirectoriesMap>
    </PropertyGroup>

    <Import Project="$(MSBuildThisFileDirectory)ImportAfter\*.props" Condition="Exists('$(MSBuildThisFileDirectory)ImportAfter')" />
</Project>
